//##fail_test
import "../ustlib/thread.u"
import "../ustlib/shared_ptr.u"

struct CallableObject shared
{
	op()( this )
	{}
}

struct CallableObjectShared
{
	ust::shared_ptr_nullable_imut</i32/> ptr;
	op()( this )
	{}
}

fn nomangle main() : i32
{
	{ // Create thread with "shared"-marked function-object.
		auto thread= ust::make_thread_void( CallableObject() ); //##expect_error TemplateContext
	}
	{ // Create thread with function-object, containing non-thread-safe shared_ptr class inside.
		auto thread= ust::make_thread_void( CallableObjectShared() ); //##expect_error TemplateContext
	}

	return 0;
}
